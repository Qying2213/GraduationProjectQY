# 智能人才招聘管理平台 - 系统设计文档

> 📖 返回 [项目首页](../README.md) | 相关文档：[系统架构](ARCHITECTURE.md) | [数据库设计](DATABASE_DESIGN.md) | [快速启动](QUICKSTART.md)

---

## 1. 系统概述

智能人才招聘管理平台是一个基于微服务架构的企业级招聘管理系统，包含三大核心模块：

1. **企业管理后台**：HR和管理员使用，进行招聘全流程管理
2. **求职者门户**：求职者浏览职位、投递简历、管理个人信息
3. **数据大屏**：实时展示招聘数据可视化

---

## 2. 功能模块设计

### 2.1 用户认证模块

**功能描述**：
- 用户注册、登录、登出
- JWT Token 认证
- 密码加密存储（bcrypt）
- 用户信息管理

**角色权限**：
| 角色 | 权限范围 |
|------|---------|
| admin | 所有权限 |
| hr_manager | 人才、职位、简历、面试、消息管理 |
| recruiter | 人才查看/创建/编辑、职位查看、简历和面试管理 |
| interviewer | 人才查看、职位查看、面试查看和反馈 |
| viewer | 只读权限 |

### 2.2 人才管理模块

**功能描述**：
- 人才信息CRUD
- 多维度搜索筛选（技能、经验、学历、地点）
- 人才标签管理
- 人才状态跟踪（active/hired/pending/rejected）

**数据字段**：
- 基本信息：姓名、邮箱、电话、性别、年龄
- 职业信息：技能、工作经验、学历、当前公司、当前职位
- 期望信息：期望薪资、期望地点
- 来源信息：来源渠道、标签

### 2.3 职位管理模块

**功能描述**：
- 职位发布、编辑、关闭
- 职位搜索筛选
- 职位统计分析
- 技能要求配置

**职位状态**：
- open：招聘中
- closed：已关闭
- filled：已招满
- paused：暂停招聘

**职位类型**：
- full-time：全职
- part-time：兼职
- contract：合同
- internship：实习


### 2.4 简历管理模块

**功能描述**：
- 简历上传（支持文件上传和JSON数据）
- 简历解析
- 简历状态流转
- AI智能评估
- 简历下载

**简历状态流转**：
```
pending → reviewing → interviewed → offered → hired
                  ↘                      ↘
                   rejected              rejected
```

**AI评估功能**：
- 单个简历评估
- 批量简历评估
- 评估结果查看
- 评估维度：技术能力、项目经验、教育背景、JD匹配度

### 2.5 智能推荐模块

**功能描述**：
- 为职位推荐人才
- 为人才推荐职位
- 多维度匹配分析
- 推荐统计

**匹配算法**：
```
总匹配度 = 技能匹配(50%) + 经验匹配(20%) + 地理位置(15%) + 学历匹配(10%) + 薪资匹配(5%)
```

**技能权重配置**：
| 技能 | 权重 |
|------|------|
| Go | 1.2x |
| Kubernetes | 1.3x |
| Docker | 1.2x |
| Python | 1.1x |
| Vue/React | 1.1x |
| 机器学习/深度学习 | 1.3x |

**匹配等级**：
- ≥80%：高度匹配
- ≥60%：中等匹配
- ≥40%：基本匹配
- <40%：匹配度较低

### 2.6 面试管理模块

**功能描述**：
- 面试安排（创建、编辑、删除）
- 面试日历视图
- 面试反馈提交
- 面试状态管理
- 面试改期/取消
- 面试统计

**面试类型**：
- initial：初试
- second：复试
- final：终面
- hr：HR面

**面试方式**：
- onsite：现场面试
- video：视频面试
- phone：电话面试

**面试状态**：
- scheduled：已安排
- completed：已完成
- cancelled：已取消
- no_show：未出席

### 2.7 消息中心模块

**功能描述**：
- 站内消息发送/接收
- 消息分类（系统通知、面试邀约、简历投递、系统公告）
- 未读消息统计
- 消息已读标记
- 批量操作（标记已读、删除）

**消息类型**：
- system：系统消息
- interview：面试邀约
- application：简历投递
- notification：通知提醒


### 2.8 数据报表模块

**功能描述**：
- 招聘数据概览
- 招聘漏斗分析
- 渠道统计
- 部门招聘进度
- 面试官排行
- 趋势分析
- 职位热度排行

**统计指标**：
- 人才总数、在招职位数、简历投递数、面试安排数
- 招聘漏斗转化率
- 各渠道投递占比
- 部门招聘完成率
- 面试官面试场次和通过率

### 2.9 招聘看板模块

**功能描述**：
- 可视化招聘流程
- 拖拽式状态管理
- 各阶段候选人统计

**看板阶段**：
- 简历投递 → 简历筛选 → 面试邀约 → 面试中 → 面试通过 → 发送Offer → 已入职

### 2.10 求职者门户模块

**功能描述**：
- 职位浏览和搜索
- 职位详情查看
- 在线投递简历
- 我的投递记录
- 我的简历管理
- 企业信息展示

**搜索筛选条件**：
- 关键词搜索
- 工作地点
- 薪资范围
- 工作经验
- 学历要求
- 职位类型

### 2.11 数据大屏模块

**功能描述**：
- 全屏数据可视化展示
- 实时数据更新
- 招聘概览统计
- 招聘漏斗图
- 职位类型分布
- 人才地域分布
- 招聘趋势图
- 热门技能需求
- 面试官排行
- 实时动态

### 2.12 系统管理模块

**功能描述**：
- 权限管理（角色配置）
- 操作日志查询（ES全文搜索）
- 系统设置

**日志查询功能**：
- 按时间范围筛选
- 按服务筛选
- 按操作类型筛选
- 全文搜索
- 日志统计

---

## 3. AI评估服务设计

### 3.1 服务架构

AI评估服务（evaluator-service）是一个独立的微服务，提供：
- 简历智能评估（基于Coze AI）
- 候选人管理
- 钉钉消息推送
- 报告导出（PDF/Excel）

### 3.2 评估流程

```
1. 上传简历文件
2. 文件存储到服务器
3. 调用Coze AI API进行分析
4. 返回评估结果（分数、维度分析、建议）
5. 可选：推送到钉钉群
6. 可选：导出报告
```

### 3.3 评估维度

| 维度 | 说明 |
|------|------|
| 技术能力 | 技术栈匹配度、技术深度 |
| 项目经验 | 项目复杂度、项目成果 |
| 教育背景 | 学历、专业匹配度 |
| JD匹配度 | 与职位描述的整体匹配程度 |

### 3.4 钉钉集成

- 支持多个钉钉机器人配置
- 评估完成后自动推送
- 支持测试推送
- 支持手动推送候选人信息


---

## 4. 接口设计

### 4.1 统一响应格式

**成功响应**：
```json
{
  "code": 0,
  "message": "success",
  "data": { ... }
}
```

**错误响应**：
```json
{
  "code": 1,
  "message": "错误信息",
  "data": null
}
```

### 4.2 分页参数

| 参数 | 类型 | 说明 |
|------|------|------|
| page | int | 页码，从1开始 |
| page_size | int | 每页数量，默认10 |

**分页响应**：
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "list": [...],
    "total": 100,
    "page": 1,
    "page_size": 10
  }
}
```

### 4.3 认证方式

- 使用 JWT Token 认证
- Token 放在请求头 `Authorization: Bearer <token>`
- Token 有效期：24小时

### 4.4 核心接口示例

**用户登录**：
```
POST /api/v1/login
Content-Type: application/json

{
  "username": "admin",
  "password": "password123"
}

Response:
{
  "code": 0,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": 1,
      "username": "admin",
      "role": "admin"
    }
  }
}
```

**获取职位列表**：
```
GET /api/v1/jobs?page=1&page_size=10&status=open

Response:
{
  "code": 0,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "高级Go开发工程师",
        "salary": "30-50K",
        "location": "北京",
        "status": "open"
      }
    ],
    "total": 48,
    "page": 1,
    "page_size": 10
  }
}
```

**智能推荐**：
```
POST /api/v1/recommendations/talents-for-job
Content-Type: application/json

{
  "id": 1,
  "title": "高级Go开发工程师",
  "skills": ["Go", "Docker", "Kubernetes"],
  "location": "北京",
  "level": "senior"
}

Response:
{
  "code": 0,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "张三",
      "score": 95.2,
      "reason": "高度匹配",
      "match_level": "high",
      "match_details": ["匹配技能: Go, Docker, Kubernetes", "经验完全匹配"]
    }
  ]
}
```

---

## 5. 安全设计

### 5.1 认证安全

- 密码使用 bcrypt 加密存储
- JWT Token 签名验证
- Token 过期自动失效
- 敏感操作需要重新认证

### 5.2 API安全

- API Gateway 统一限流（令牌桶算法，每IP每秒100请求）
- CORS 跨域配置
- 请求参数校验
- SQL 注入防护（GORM参数化查询）

### 5.3 数据安全

- 敏感数据加密存储
- 日志脱敏处理
- 文件上传类型限制
- 文件大小限制

### 5.4 权限控制

- 基于角色的访问控制（RBAC）
- 细粒度权限配置
- 操作日志审计

---

## 6. 性能设计

### 6.1 数据库优化

- 合理的索引设计
- 分页查询
- 避免N+1查询

### 6.2 缓存策略

- 热点数据缓存（可选Redis）
- 静态资源缓存

### 6.3 日志优化

- 异步写入ES
- 日志分级
- 定期清理旧日志

---

## 📚 相关文档

| 文档 | 说明 |
|------|------|
| [📖 项目首页](../README.md) | 项目概述和快速入门 |
| [📐 系统架构](ARCHITECTURE.md) | 微服务架构设计 |
| [🗄️ 数据库设计](DATABASE_DESIGN.md) | 表结构、ER图、数据字典 |
| [🚀 快速启动](QUICKSTART.md) | 环境配置、安装步骤 |
| [🐳 部署文档](DEPLOYMENT.md) | Docker部署、生产环境 |
| [🧪 测试指南](TEST_GUIDE.md) | API测试、功能测试 |
| [📝 代码规范](CODE_GUIDE.md) | 目录结构、开发指南 |
