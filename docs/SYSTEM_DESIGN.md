# 系统设计文档

## 1. 系统概述

### 1.1 项目背景
智能人才招聘管理平台是一个面向企业HR和招聘团队的综合性招聘管理系统，旨在提高招聘效率、优化人才管理流程、实现智能化简历评估。

### 1.2 系统目标
- 实现招聘全流程数字化管理
- 提供智能化简历评估和人岗匹配
- 支持多角色协同工作
- 提供数据可视化分析

### 1.3 技术选型

| 层次 | 技术栈 | 说明 |
|------|--------|------|
| 前端 | Vue3 + TypeScript + Element Plus | 现代化前端框架 |
| 后端 | Go + Gin + GORM | 高性能微服务架构 |
| 数据库 | PostgreSQL | 关系型数据库 |
| 搜索引擎 | Elasticsearch | 日志存储与全文搜索 |
| AI服务 | Coze API | 智能简历评估 |
| 容器化 | Docker + Docker Compose | 部署与运维 |

---

## 2. 系统架构

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                         客户端层                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   管理后台      │  │   求职者门户    │  │   数据大屏      │  │
│  │   (Vue3)        │  │   (Vue3)        │  │   (ECharts)     │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                         网关层                                   │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    Nginx / Vite Proxy                    │    │
│  │                    (路由分发 + 负载均衡)                  │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        微服务层                                  │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐           │
│  │ 用户服务 │ │ 职位服务 │ │ 人才服务 │ │ 简历服务 │           │
│  │  :8081   │ │  :8082   │ │  :8086   │ │  :8084   │           │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘           │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐           │
│  │ 面试服务 │ │ 消息服务 │ │ 日志服务 │ │ AI评估   │           │
│  │  :8083   │ │  :8085   │ │  :8088   │ │  :8090   │           │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘           │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        数据层                                    │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   PostgreSQL    │  │  Elasticsearch  │  │   Coze API      │  │
│  │   (业务数据)    │  │   (日志数据)    │  │   (AI评估)      │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 微服务划分

| 服务名称 | 端口 | 职责 |
|----------|------|------|
| user-service | 8081 | 用户认证、权限管理 |
| job-service | 8082 | 职位CRUD、搜索筛选 |
| interview-service | 8083 | 面试安排、反馈管理 |
| resume-service | 8084 | 简历管理、状态流转 |
| message-service | 8085 | 消息通知、站内信 |
| talent-service | 8086 | 人才库管理、搜索 |
| log-service | 8088 | 操作日志查询 |
| evaluator-service | 8090 | AI简历评估 |

---

## 3. 功能模块设计

### 3.1 用户管理模块

```
用户管理
├── 用户认证
│   ├── 登录 (JWT Token)
│   ├── 注册
│   └── 密码重置
├── 权限管理
│   ├── 角色定义 (admin, hr_manager, recruiter, interviewer, viewer)
│   └── 权限控制 (RBAC)
└── 用户信息
    ├── 个人资料
    └── 头像管理
```

### 3.2 职位管理模块

```
职位管理
├── 职位发布
│   ├── 基本信息 (标题、描述、要求)
│   ├── 薪资范围
│   └── 工作地点
├── 职位搜索
│   ├── 关键词搜索
│   ├── 状态筛选
│   └── 地点筛选
└── 职位统计
    ├── 申请数量
    └── 状态分布
```

### 3.3 人才管理模块

```
人才管理
├── 人才库
│   ├── 人才列表
│   ├── 人才详情
│   └── 人才搜索
├── 人才筛选
│   ├── 技能匹配
│   ├── 经验筛选
│   └── 地区筛选
└── 数据导出
    ├── Excel导出
    └── CSV导出
```

### 3.4 简历管理模块

```
简历管理
├── 简历列表
│   ├── 状态筛选 (pending, reviewing, interviewed, hired, rejected)
│   └── 排序功能
├── 简历详情
│   ├── 基本信息
│   └── 工作经历
├── AI评估
│   ├── 智能评分
│   └── 匹配度分析
└── 状态流转
    └── 状态更新
```

### 3.5 面试管理模块

```
面试管理
├── 面试安排
│   ├── 创建面试
│   ├── 面试日历
│   └── 面试提醒
├── 面试反馈
│   ├── 评分
│   └── 评语
└── 面试统计
    ├── 面试官排行
    └── 通过率分析
```

### 3.6 消息通知模块

```
消息通知
├── 消息类型
│   ├── 系统通知
│   ├── 面试邀约
│   └── 简历投递提醒
├── 消息管理
│   ├── 已读/未读
│   └── 批量操作
└── 消息统计
    └── 未读数量
```

### 3.7 数据分析模块

```
数据分析
├── 仪表板
│   ├── 核心指标
│   └── 趋势图表
├── 数据大屏
│   ├── 地域分布
│   ├── 招聘漏斗
│   └── 实时动态
└── 数据报表
    ├── 招聘报表
    └── 导出功能
```

---

## 4. 接口设计

### 4.1 RESTful API 规范

```
GET    /api/v1/resources      # 获取列表
GET    /api/v1/resources/:id  # 获取详情
POST   /api/v1/resources      # 创建资源
PUT    /api/v1/resources/:id  # 更新资源
DELETE /api/v1/resources/:id  # 删除资源
```

### 4.2 统一响应格式

```json
{
  "code": 0,
  "message": "success",
  "data": {
    // 业务数据
  }
}
```

### 4.3 主要接口列表

| 模块 | 接口 | 方法 | 说明 |
|------|------|------|------|
| 用户 | /api/v1/login | POST | 用户登录 |
| 用户 | /api/v1/register | POST | 用户注册 |
| 用户 | /api/v1/users | GET | 用户列表 |
| 职位 | /api/v1/jobs | GET/POST | 职位列表/创建 |
| 职位 | /api/v1/jobs/:id | GET/PUT/DELETE | 职位详情/更新/删除 |
| 人才 | /api/v1/talents | GET/POST | 人才列表/创建 |
| 人才 | /api/v1/talents/search | GET | 人才搜索 |
| 简历 | /api/v1/resumes | GET | 简历列表 |
| 简历 | /api/v1/resumes/:id/status | PUT | 更新状态 |
| 面试 | /api/v1/interviews | GET/POST | 面试列表/创建 |
| 面试 | /api/v1/interviews/today | GET | 今日面试 |
| 消息 | /api/v1/messages | GET/POST | 消息列表/发送 |
| 日志 | /api/v1/logs | GET | 操作日志 |

---

## 5. 安全设计

### 5.1 认证机制
- JWT Token 认证
- Token 有效期 24 小时
- 支持 Token 刷新

### 5.2 权限控制
- 基于角色的访问控制 (RBAC)
- 5种预定义角色
- 细粒度权限配置

### 5.3 数据安全
- 密码 bcrypt 加密存储
- SQL 注入防护 (GORM 参数化查询)
- XSS 防护 (前端输入过滤)

---

## 6. 性能设计

### 6.1 前端优化
- 路由懒加载
- 组件按需引入
- 图片懒加载
- Gzip 压缩

### 6.2 后端优化
- 数据库连接池
- 分页查询
- 索引优化
- 缓存策略

### 6.3 日志优化
- Elasticsearch 异步写入
- 日志分级存储
- 定期清理策略

---

## 7. 部署架构

### 7.1 开发环境
```bash
# 前端
cd frontend && npm run dev

# 后端
./start-backend.sh
```

### 7.2 生产环境
```bash
# Docker Compose 一键部署
docker-compose up -d
```

### 7.3 服务端口规划

| 服务 | 开发端口 | 生产端口 |
|------|----------|----------|
| 前端 | 5173 | 80 |
| 用户服务 | 8081 | 8081 |
| 职位服务 | 8082 | 8082 |
| 面试服务 | 8083 | 8083 |
| 简历服务 | 8084 | 8084 |
| 消息服务 | 8085 | 8085 |
| 人才服务 | 8086 | 8086 |
| 日志服务 | 8088 | 8088 |
| AI评估 | 8090 | 8090 |
| PostgreSQL | 5432 | 5432 |
| Elasticsearch | 9200 | 9200 |
| Kibana | 5601 | 5601 |

---

## 8. 测试策略

### 8.1 测试覆盖
- API 接口测试：90个测试用例
- 前端单元测试：Vitest
- E2E 测试：手动测试

### 8.2 测试命令
```bash
# 后端 API 测试
cd backend && ./test_api.sh

# 前端单元测试
cd frontend && npm run test
```

---

## 9. 扩展性设计

### 9.1 水平扩展
- 微服务独立部署
- 无状态设计
- 支持多实例

### 9.2 功能扩展
- 模块化设计
- 插件化架构
- API 版本控制

---

## 10. 项目亮点

1. **微服务架构**：8个独立服务，职责清晰，易于维护
2. **AI 智能评估**：集成 Coze AI，实现简历智能评分
3. **实时日志**：Elasticsearch 存储，支持全文搜索
4. **数据可视化**：ECharts 数据大屏，直观展示
5. **完整测试**：90个 API 测试用例，100% 通过率
6. **响应式设计**：支持 PC 和移动端访问
